<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êó•Êú¨Ë™û‰ºöË©±Á∑¥Áøí„Éù„Éº„Çø„É´ | Japanese Conversation Practice</title>
    <style>
        :root {
            --primary-color: #0056b3;
            --accent-color: #ffc107;
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
        }
        body { 
            font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", sans-serif; 
            max-width: 900px; 
            margin: 0 auto; 
            padding: 20px; 
            background-color: var(--bg-color); 
            color: #333; 
            line-height: 1.6;
        }

        /* Header */
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        h1 { margin: 0; color: var(--primary-color); font-size: 1.8rem; }
        .subtitle { color: #666; font-size: 1rem; margin-top: 5px; }

        /* Alert Box for Tips */
        .alert-box {
            background-color: #fff3cd;
            border: 1px solid #ffeeba;
            color: #856404;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 30px;
            font-size: 0.9rem;
        }
        .alert-box strong { color: #533f03; }

        /* Filter Section (New) */
        .filter-section {
            margin-bottom: 30px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .filter-group {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 8px;
        }
        .filter-group:last-child { margin-bottom: 0; }
        .filter-label {
            font-weight: bold;
            font-size: 0.9rem;
            color: #555;
            margin-right: 5px;
            min-width: 60px;
        }
        .filter-btn {
            background: #f0f2f5;
            border: 1px solid #ddd;
            border-radius: 20px;
            padding: 5px 12px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
            color: #555;
        }
        .filter-btn:hover { background: #e2e6ea; }
        .filter-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        .filter-btn-reset {
            background: transparent;
            text-decoration: underline;
            border: none;
            color: #dc3545;
            font-size: 0.85rem;
            cursor: pointer;
            margin-left: auto;
        }

        /* Scenario Grid */
        .scenario-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); 
            gap: 20px; 
        }

        /* Card Design */
        .scenario-card { 
            background: var(--card-bg); 
            border-radius: 15px; 
            overflow: hidden; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.08); 
            transition: transform 0.2s, box-shadow 0.2s; 
            display: flex;
            flex-direction: column;
            border: 1px solid #eee;
        }
        /* Hidden state for filtering */
        .scenario-card.hidden {
            display: none;
        }

        .scenario-card:hover { 
            transform: translateY(-5px); 
            box-shadow: 0 10px 20px rgba(0,0,0,0.12); 
            border-color: var(--primary-color);
        }

        .card-header {
            background: linear-gradient(135deg, #007bff, #00d2ff);
            color: white;
            padding: 15px;
            font-size: 3rem;
            text-align: center;
        }
        
        .card-body { padding: 20px; flex-grow: 1; }
        .card-title { margin: 0 0 10px 0; font-size: 1.2rem; font-weight: bold; color: #333; }
        .card-desc { margin: 0 0 15px 0; font-size: 0.9rem; color: #666; }
        
        .tags { display: flex; gap: 8px; margin-bottom: 15px; flex-wrap: wrap; }
        .tag { 
            font-size: 0.75rem; padding: 3px 8px; border-radius: 4px; font-weight: bold; 
        }
        .tag-level { background-color: #e3f2fd; color: #0d47a1; }
        .tag-topic { background-color: #f3e5f5; color: #7b1fa2; }

        .btn-start { 
            display: block; 
            width: 100%; 
            padding: 12px; 
            background: var(--primary-color); 
            color: white; 
            text-align: center; 
            text-decoration: none; 
            font-weight: bold; 
            border-radius: 0 0 15px 15px; /* Bottom rounded corners only if outside padding */
            margin-top: auto;
            transition: background 0.2s;
        }
        .scenario-card .btn-start { border-radius: 0; } /* Reset for full width bottom */
        .btn-start:hover { background: #003d82; }

        /* API Key Section */
        .api-section {
            text-align: center;
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            color: #666;
            font-size: 0.9rem;
        }
        .api-link { color: var(--primary-color); text-decoration: none; font-weight: bold; }
        .api-link:hover { text-decoration: underline; }

    </style>
</head>
<body>

    <header>
        <h1>üáØüáµ Êó•Êú¨Ë™û‰ºöË©±Á∑¥Áøí„Éù„Éº„Çø„É´</h1>
        <div class="subtitle">Japanese Conversation Practice Portal</div>
    </header>
    
    <!-- ‚ö†Ô∏è Ê≥®ÊÑèÊõ∏„Åç„Ç®„É™„Ç¢ -->
    <div class="alert-box">
        <div>üì¢ <b>Before You Start (Âà©Áî®Ââç„ÅÆÊ≥®ÊÑè)</b></div>
        <ul style="margin: 5px 0 0 20px; padding: 0;">
            <li><b>iPhone/iPad Users:</b> Turn off Silent Mode („Éû„Éä„Éº„É¢„Éº„Éâ„ÇíËß£Èô§„Åó„Å¶„Åè„Å†„Åï„ÅÑ). Otherwise, no sound will play.</li>
            <li><b>API Key:</b> You need a Google Gemini API Key (Free). <a href="https://aistudio.google.com/app/apikey" target="_blank">Get it here ‚Üó</a></li>
        </ul>
    </div>

    <!-- „Éï„Ç£„É´„Çø„É™„É≥„Ç∞UI (JS„Åß‰∏≠Ë∫´„ÇíÁîüÊàê) -->
    <div id="filter-container" class="filter-section" style="display:none;">
        <!-- Level Filters -->
        <div class="filter-group" id="level-filters">
            <span class="filter-label">Level:</span>
            <!-- Buttons will be injected here -->
        </div>
        <!-- Topic Filters -->
        <div class="filter-group" id="topic-filters" style="margin-top:10px; border-top:1px dashed #eee; padding-top:10px;">
            <span class="filter-label">Topic:</span>
            <!-- Buttons will be injected here -->
        </div>
        <div style="text-align: right; margin-top: 10px;">
            <button class="filter-btn-reset" onclick="resetFilters()">Clear Filters</button>
        </div>
    </div>

    <!-- „Ç∑„Éä„É™„Ç™‰∏ÄË¶ß -->
    <div class="scenario-grid" id="scenario-grid">


<!-- „Ç∑„Éä„É™„Ç™:„Å°„Çá„Å£„Å® „Åø„Å¶ „Åè„Å†„Åï„ÅÑ„Åæ„Åõ„Çì„Åã„ÄÇ  -->
        <article class="scenario-card" data-level="‚òÖ‚òÖ‚òÜ‚òÜ A2" data-topic="Marugoto A2-1">
            <div class="card-header">üè¢</div>
            <div class="card-body">
                <div class="tags">
                    <span class="tag tag-level">‚òÖ‚òÖ‚òÜ‚òÜ A2</span>
                    <span class="tag tag-topic">Minna no Nihongo 2</span>
                </div>
                <h2 class="card-title">„Å°„Çá„Å£„Å® „Åø„Å¶ „Åè„Å†„Åï„ÅÑ„Åæ„Åõ„Çì„Åã</h2>
                <p class="card-desc">Briefly explain a situation and make a polite request for help</p>
            </div>
            <a href="student_Make_a_polite_request.html" class="btn-start">Start Practice ‚ñ∂</a>
        </article>

        <!-- „Ç∑„Éä„É™„Ç™:„Éú„É©„É≥„ÉÜ„Ç£„Ç¢„Åï„Çì„Åå „Åó„Å¶„Åè„Å†„Åï„ÅÑ„Åæ„Åó„Åü  -->
        <article class="scenario-card" data-level="‚òÖ‚òÖ‚òÜ‚òÜ A2" data-topic="Minna no Nihongo 2">
            <div class="card-header">‚òïÔ∏è</div>
            <div class="card-body">
                <div class="tags">
                    <span class="tag tag-level">‚òÖ‚òÖ‚òÜ‚òÜ A2</span>
                    <span class="tag tag-topic">Minna no Nihongo 2</span>
                </div>
                <h2 class="card-title">„Éú„É©„É≥„ÉÜ„Ç£„Ç¢„Åï„Çì„Åå „Åó„Å¶„Åè„Å†„Åï„ÅÑ„Åæ„Åó„Åü</h2>
                <p class="card-desc">Talk about the kindness you received from volunteers, using expressions such as ÔΩû„Å¶„Åè„Å†„Åï„ÅÑ„Åæ„Åó„Åü.</p>
            </div>
            <a href="student_Talk_about_Kindness.html" class="btn-start">Start Practice ‚ñ∂</a>
        </article>

        <!-- „Ç∑„Éä„É™„Ç™:„ÅÇ„Å™„Åü„ÅØ „Å™„Å´„Çí „Åó„Åü„ÅÑ„Åß„Åô„Åã„ÄÇ  -->
        <article class="scenario-card" data-level="‚òÖ‚òÖ‚òÜ‚òÜ A2" data-topic="Marugoto A2-1">
            <div class="card-header">üåá</div>
            <div class="card-body">
                <div class="tags">
                    <span class="tag tag-level">‚òÖ‚òÖ‚òÜ‚òÜ A2</span>
                    <span class="tag tag-topic">Marugoto A2-1</span>
                </div>
                <h2 class="card-title">„ÅÇ„Å™„Åü„ÅØ „Å™„Å´„Çí „Åó„Åü„ÅÑ„Åß„Åô„Åã„ÄÇ„Å®„ÇÇ„Å†„Å°„Å´„ÄÄË®Ä„ÅÑ„Åæ„Åó„Çá„ÅÜ</h2>
                <p class="card-desc">Say that you would like to drop by somewhere</p>
            </div>
            <a href="student_drop_by.html" class="btn-start">Start Practice ‚ñ∂</a>
        </article>

 <!-- „Ç∑„Éä„É™„Ç™:„Å©„Åì„Å´ „ÅÑ„Åæ„Åô„Åã„ÄÇ  -->
        <article class="scenario-card" data-level="‚òÖ‚òÜ‚òÜ‚òÜ A1" data-topic="Marugoto A1">
            <div class="card-header">üì±</div>
            <div class="card-body">
                <div class="tags">
                    <span class="tag tag-level">‚òÖ‚òÜ‚òÜ‚òÜ A1</span>
                    <span class="tag tag-topic">Marugoto A1</span>
                </div>
                <h2 class="card-title">„Å©„Åì„Å´ „ÅÑ„Åæ„Åô„Åã</h2>
                <p class="card-desc">Say where you are now over the phone</p>
            </div>
            <a href="student_Say_where.html" class="btn-start">Start Practice ‚ñ∂</a>
        </article>

		 <!-- „Ç∑„Éä„É™„Ç™:„Å©„Åì„Å´ „ÅÑ„Åæ„Åô„Åã„ÄÇ  -->
		<article class="scenario-card" data-level="‚òÖ‚òÜ‚òÜ‚òÜ A1" data-topic="Marugoto A1">
                   <div class="card-header">üçî</div>
            <div class="card-body">
                <div class="tags">
                    <span class="tag tag-level">‚òÖ‚òÜ‚òÜ‚òÜ A1</span>
                    <span class="tag tag-topic">Marugoto A1</span>
                </div>
                <h2 class="card-title">„Éè„É≥„Éê„Éº„Ç¨„Éº„Çí„ÄÄ„Åü„Åπ„Åæ„Åó„Çá„ÅÜ</h2>
                <p class="card-desc">Order food and drink at a hamburger shop</p>
            </div>
            <a href="student_Order_food.html" class="btn-start">Start Practice ‚ñ∂</a>
        </article>

		<!-- 
          Êñ∞„Åó„ÅÑ„Ç∑„Éä„É™„Ç™„ÇíËøΩÂä†„Åô„ÇãÈöõ„ÅØ„ÄÅ‰∏äË®ò„ÅÆ <article> „Éñ„É≠„ÉÉ„ÇØ„Çí„Ç≥„Éî„Éº„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ
          ÈáçË¶Å: „Éï„Ç£„É´„Çø„É™„É≥„Ç∞„ÅÆ„Åü„ÇÅ„Å´„ÄÅarticle„Çø„Ç∞„Å´ data-level="..." „Å® data-topic="..." „Çí
          „Çø„Ç∞„ÅÆ‰∏≠Ë∫´„Å®Âêå„ÅòÊñáÂ≠ó„ÅßËøΩÂä†„Åó„Å¶„Åä„Åè„Å®Á¢∫ÂÆü„Åß„ÅôÔºàËá™ÂãïÂèñÂæó„ÇÇ„Åó„Åæ„Åô„Åå„ÄÅÂøµ„ÅÆ„Åü„ÇÅÔºâ„ÄÇ
        -->

    </div>

    <footer class="api-section">
        <p>This application uses Google Gemini API.</p>
        <p>We do not store your API key or conversation data on our server.</p>
        <p>&copy; 2025 Japanese Practice Portal</p>
    </footer>

    <!-- Filter Logic Script -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const grid = document.getElementById('scenario-grid');
            const cards = grid.querySelectorAll('.scenario-card');
            const filterContainer = document.getElementById('filter-container');
            const levelContainer = document.getElementById('level-filters');
            const topicContainer = document.getElementById('topic-filters');

            const levels = new Set();
            const topics = new Set();

            // 1. Collect Tags from existing cards
            cards.forEach(card => {
                // Find tags inside the card
                const levelTag = card.querySelector('.tag-level');
                const topicTag = card.querySelector('.tag-topic');

                if (levelTag) {
                    const txt = levelTag.textContent.trim();
                    levels.add(txt);
                    card.setAttribute('data-level', txt); // Ensure attribute exists
                }
                if (topicTag) {
                    const txt = topicTag.textContent.trim();
                    topics.add(txt);
                    card.setAttribute('data-topic', txt); // Ensure attribute exists
                }
            });

            // If no tags found, don't show filter
            if (levels.size === 0 && topics.size === 0) return;
            filterContainer.style.display = 'block';

            // 2. Generate Buttons
            createFilterButtons(levelContainer, levels, 'level');
            createFilterButtons(topicContainer, topics, 'topic');

            function createFilterButtons(container, set, type) {
                // Convert Set to Array and Sort
                const sorted = Array.from(set).sort();
                sorted.forEach(item => {
                    const btn = document.createElement('button');
                    btn.className = 'filter-btn';
                    btn.textContent = item;
                    btn.onclick = () => toggleFilter(btn, type, item);
                    container.appendChild(btn);
                });
            }

            // 3. Filter Logic
            let activeFilters = { level: null, topic: null };

            function toggleFilter(btn, type, value) {
                // Toggle UI state
                const isActive = btn.classList.contains('active');
                
                // Reset siblings in same group
                btn.parentNode.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));

                if (isActive) {
                    // Deselect
                    activeFilters[type] = null;
                } else {
                    // Select
                    btn.classList.add('active');
                    activeFilters[type] = value;
                }

                applyFilters();
            }

            window.resetFilters = function() {
                activeFilters = { level: null, topic: null };
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                applyFilters();
            }

            function applyFilters() {
                cards.forEach(card => {
                    const cardLevel = card.getAttribute('data-level');
                    const cardTopic = card.getAttribute('data-topic');

                    // Match logic
                    const matchLevel = !activeFilters.level || cardLevel === activeFilters.level;
                    const matchTopic = !activeFilters.topic || cardTopic === activeFilters.topic;

                    if (matchLevel && matchTopic) {
                        card.classList.remove('hidden');
                    } else {
                        card.classList.add('hidden');
                    }
                });
            }
        });
    </script>

</body>
</html>
